import{r as o,bu as O,u as S,aU as _,j as n,B as j,P as N,bv as C,aW as M,Z as A,cl as E,cq as D}from"./index-CEjZvgK9.js";import{u as P}from"./new-COxYa5EF.js";import"./useThemeProps-B9eWXme6.js";const R={name:"companies",fields:[{name:"company_name",type:"string"},{name:"num_employees",type:"int32",facet:!0}],default_sorting_field:"num_employees",enable_nested_fields:!0},I=({defaultValue:u=JSON.stringify(R),options:i,...d})=>{const r=o.useRef(null),m=o.useRef(null),{mode:l,systemMode:h}=O(),g=l==="system"?h:l,f=S(),[c,p]=o.useState([]),s=P(),v=o.useMemo(()=>({..._,...i,readOnly:!!s.isPending}),[i,s.isPending]),x=(e,a)=>{r.current=e,m.current=a,setTimeout(()=>{var t;(t=e.getAction("editor.action.formatDocument"))==null||t.run(),a.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"",fileMatch:["*"],schema:E(D)}]})},50)},y=async()=>{var t;let e=(t=r.current)==null?void 0:t.getValue();if(!e)return;let a=JSON.parse(e);if(c.length){f.warn("Invalid JSON",{id:"monaco-validation"});return}s.mutate(a)};return n.jsxs(j,{children:[n.jsx(N,{sx:{borderRadius:1,overflow:"hidden"},children:n.jsx(C,{height:"60vh",defaultLanguage:"json",theme:g==="light"?"vs-light":"vs-dark",onMount:x,defaultValue:u,onValidate:e=>{p(e)},options:v,loading:n.jsx(M,{variant:"rounded",height:"100%"}),...d})}),n.jsx(A,{variant:"contained",onClick:y,disabled:!!c.length,loading:s.isPending,sx:{my:2},children:"Create Collection"})]})};export{I as default};
