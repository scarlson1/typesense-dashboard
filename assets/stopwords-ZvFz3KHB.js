import{j as e,T as m,L as j,O as S,P as b,B as u,u as h,m as w,n as x,q as g,b as v,o as F,p as I,v as $,r as q,G as D,w as A,x as C,y as E}from"./index-Baji6FHN.js";function L(){const o=h(),[d,l]=w(),{data:c,isLoading:i,isFetching:t,isError:r,error:a}=$({queryKey:[l,"stopwords"],queryFn:async()=>(await d.stopwords().retrieve()).stopwords}),p=x({mutationFn:s=>d.stopwords(s).delete(),onMutate:s=>{o.loading(`deleting [${s}]`,{id:`delete-${s}`})},onSuccess:(s,n)=>{o.success(`"${n}" deleted`,{id:`delete-${n}`})},onError:(s,n)=>{let y=(s==null?void 0:s.message)||`error deleting "${n}"`;o.error(y,{id:`delete-${n}`})},onSettled:()=>{g.invalidateQueries({queryKey:[l,"stopwords"]})}}),f=q.useMemo(()=>[{field:"id",headerName:"ID",type:"string",minWidth:120,flex:1,sortable:!1,filterable:!1},{field:"stopwords",headerName:"Description",type:"string",minWidth:160,flex:1.5,sortable:!1,filterable:!1,valueFormatter:(s,n)=>n.stopwords.join(", ")},{field:"locale",headerName:"Locale",type:"string",minWidth:80,flex:.4,sortable:!1,filterable:!1},{headerName:"Actions",field:"grid-actions",type:"actions",minWidth:60,maxWidth:80,flex:1,getActions:s=>[e.jsx(D,{icon:e.jsx(A,{placement:"top",title:"delete",children:e.jsx(C,{fontSize:"small"})}),onClick:async()=>{p.mutate(s.row.id)},label:"Delete Stopword Set",disabled:p.isPending})]}],[p.mutate,p.isPending]);return r?e.jsx(m,{children:(a==null?void 0:a.message)||"an error occurred"}):e.jsx(u,{sx:{display:"flex",flexDirection:"column",minHeight:267,maxHeight:{xs:"calc(100vh - 140px)",md:"calc(100vh - 160px)"},width:"100%"},children:e.jsx(E,{rows:c||[],columns:f,loading:i||t,pageSizeOptions:[5,10,20],initialState:{pagination:{paginationModel:{pageSize:10,page:0}}}})})}function M(){const o=h(),[d,l]=w(),c=x({mutationFn:({stopwordId:t,params:r})=>d.stopwords().upsert(t,r),onMutate:t=>{o.loading(`saving stopword set [${t.stopwordId}]`,{id:"save-stopwords"})},onSuccess:t=>{o.success(`stopwords saved [${t.id}]`,{id:"save-stopwords"})},onError:(t,r)=>{let a=t.message||`error saving stopwords [${r.stopwordId}]`;o.error(a,{id:"save-stopwords"})},onSettled:()=>{g.invalidateQueries({queryKey:[l,"stopwords"]})}}),i=v({...F,onSubmit:async({value:t})=>{try{await c.mutateAsync({stopwordId:t.stopwordId,params:{stopwords:t.stopwords.split(",").map(r=>r.trim()),locale:t.locale}}),i.reset()}catch{}}});return e.jsx(u,{component:"form",onSubmit:t=>{t.preventDefault(),t.stopPropagation(),i.handleSubmit()},noValidate:!0,children:e.jsx(I,{form:i})})}const P=function(){return e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"h3",gutterBottom:!0,children:"Stopwords"}),e.jsxs(m,{children:["Stopwords are removed from the search query when they are present in the search query."," ",e.jsxs(j,{href:"https://typesense.org/docs/29.0/api/stopwords.html",target:"_blank",rel:"noopener noreferrer",children:["Docs ",e.jsx(S,{fontSize:"inherit"})]})]}),e.jsx(b,{sx:{p:2,mt:2},children:e.jsx(M,{})}),e.jsx(u,{sx:{py:2},children:e.jsx(L,{})})]})};export{P as component};
